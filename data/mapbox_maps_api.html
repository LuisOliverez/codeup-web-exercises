<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title>Add a geocoder</title>
  <meta name="viewport" content="initial-scale=1,maximum-scale=1,user-scalable=no">
  <link href="https://api.mapbox.com/mapbox-gl-js/v2.14.1/mapbox-gl.css" rel="stylesheet">
  <script src="https://api.mapbox.com/mapbox-gl-js/v2.14.1/mapbox-gl.js"></script>

<!-- CSS STYLING FOR PAGE-->

  <style>
    body { margin: 0; padding: 0; }

    #map { position: absolute; top: 80px; left: 0; right: 0; bottom: 0; border: 1px solid red; margin: auto; width: 80%; height: 75vh; transform: translate(0, 0); }

    .popup-favorite{font-weight: bold; color: red; margin-top: 5px}

    .popup-dishes{font-weight: bold; color: blue;}

  .popup-name {font-weight: bold; color: blue}

  </style>


</head>
<body>

<h1>My First Mapbox Map!</h1>


  <!--MAP CONTAINER-->
<div id='map' style='width: 600px; height: 400px;'></div>

<script>
<!--  ACCESS TOKEN-->
const accessToken =  mapboxgl.accessToken = 'pk.eyJ1IjoibG9saXZlcmV6IiwiYSI6ImNsZ3kyNmtiMjA1ZGEzcXFncWxxMXUxM3UifQ.Vl0vxfTC9-o4dYAB5iWM9w';

// INITIALIZING MAP
const map = new mapboxgl.Map({

container: 'map', // container ID
// Choose from Mapbox's core styles, or make your own style with Mapbox Studio
        style: 'mapbox://styles/mapbox/streets-v12', // style URL
        center: [-119.19082, 46.24174], // starting position
        zoom: 9 // starting zoom
});

// create DOM element for the marker
const el = document.createElement('div');
el.id = 'marker';



const restaurants = [
  {
    name: "Lu LU's Craft Bar + Kitchen",
    description: 'Modern tavern offering meals made with locally grown meats & produce, plus a patio with river views.',
    lngLat: [-119.24987, 46.2639],
    color: '#1200b8',
    favorite: true,
    dishes: [{name: 'Burgers', photo:  'Fried Zucchini Steaks', 'Sandwiches']
  },
  {
    name: "Anthony's at Columbia Point",
    description: 'Down-to-earth Pacific Northwest-based seafood chain serving a menu of hearty local catches.',
    lngLat: [-119.25061, 46.26352],
    color: '#b82500',
    favorite: true,
    dishes: ['Crispy Coconut Shrimp', 'Seafood Fettuccine', 'Three-Course Sunset Dinner']
  },
  {
    name: "Helados La Michoacana",
    description: "Serving authentic Mexican food and all the treats you could want.",
    lngLat: [-119.11806, 46.23494],
    color: '#1200b8',
    favorite: true,
    dishes: ['Aguas Frescas', 'Burritos De Lengua', 'Raspados']
  },
  {
   name: "Doggie Style Gourmet",
    description: "Serving up doggies in so many styles you won't know where to start.",
    lngLat: [-119.27503, 46.29100],
    color: '#b82500',
    favorite: true,
    dishes: ["Bandit: Choice of doggie topped with DSG chili con carne, shredded cheese, Fritos, and chipotle mayo.", "Bernie Mac: Choice of doggie topped with DSG mac & cheese, bacon, and crispy parmesan-thyme panko topping.", "Poppin' Peño Burger: '1/4 lb. chuck and brisket smash patty with pepper jack cheese, grilled onions and sliced jalapeños, jalapeño cream cheese, jalapeño kettle chips and chipotle mayo on a Martin’s Potato Roll" ]
  }

];

restaurants.forEach(restaurant =>{
  let content = `<div class="popup-name">${restaurant.name}</div> ${restaurant.description}`;
  if(restaurant.favorite){
    content += '<br><div class="popup-favorite">This is one of my favorite restaurants!</div>';
    content += '<br><div class="popup-dishes">Some of my favorite dishes are:</div>' + restaurant.dishes.join(',');
  }
  const popup = new mapboxgl.Popup({offset: 25}).setHTML(content);
  new mapboxgl.Marker({
    color: restaurant.color,
    draggable: false
  })

          .setLngLat(restaurant.lngLat)
        .setPopup(popup)
        .addTo(map)
        .getElement()
        .addEventListener('click', function () {
          popup.addTo(map);


        });


});


map.addControl(new mapboxgl.NavigationControl());






</script>






</body>
</html>
