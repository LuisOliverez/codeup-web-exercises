<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title>Add a geocoder</title>
  <meta name="viewport" content="initial-scale=1,maximum-scale=1,user-scalable=no">
  <link href="https://api.mapbox.com/mapbox-gl-js/v2.14.1/mapbox-gl.css" rel="stylesheet">
  <script src="https://api.mapbox.com/mapbox-gl-js/v2.14.1/mapbox-gl.js"></script>
  <style>
    body { margin: 0; padding: 0; }
    #map { position: absolute; top: 80px; left: 0; right: 0; bottom: 0; margin: auto; width: 80%; height: 75vh; transform: translate(0, 0); }
  </style>
</head>
<body>

<h1>My First Mapbox Map!</h1>


  <!--MAP CONTAINER-->
<div id='map' style='width: 600px; height: 400px;'></div>

<script>
<!--  ACCESS TOKEN-->
const accessToken =  mapboxgl.accessToken = 'pk.eyJ1IjoibG9saXZlcmV6IiwiYSI6ImNsZ3kyNmtiMjA1ZGEzcXFncWxxMXUxM3UifQ.Vl0vxfTC9-o4dYAB5iWM9w';

// INITIALIZING MAP
const map = new mapboxgl.Map({
    container: 'map', // container ID
    style: 'mapbox://styles/mapbox/streets-v12', // style URL
    center: [-119.19082, 46.24174], // starting position [lng, lat]
    zoom: 10, // starting zoom
  });

// create DOM element for the marker
const el = document.createElement('div');
el.id = 'marker';



const restaurants = [
  {
    name: "Lu LU's Craft Bar + Kitchen",
    description: 'Modern tavern offering meals made with locally grown meats & produce, plus a patio with river views.',
    lngLat: [-119.24987, 46.2639],
    color: '#1200b8'
  },
  {
    name: "Anthony's at Columbia Point",
    description: 'Down-to-earth Pacific Northwest-based seafood chain serving a menu of hearty local catches.',
    lngLat: [-119.25061, 46.26352],
    color: '#1200b8'
  },
  {
    name: "Helados La Michoacana",
    description: "Serving authentic Mexican food and all the treats you could want.",
    lngLat: [-119.11806, 46.23494],
    color: '#b82500'
  },
  {
   name: "Foodies",
    description: 'Burgers, dogs, tacos & sandwiches are served at this snug locale with a lively atmosphere & a patio.',
    lngLat: [-119.15665, 46.22311],
    color: '#b82500'
  }

];

restaurants.forEach(restaurant =>{
  const popup = new mapboxgl.Popup({ offset: 25}).setText(`${restaurant.name}: ${restaurant.description}`);
new mapboxgl.Marker({
  color: restaurant.color,
  draggable: false
})
        .setLngLat(restaurant.lngLat)
        .setPopup(popup)

        .addTo(map)
        .getElement()
        .addEventListener('click', function (){
          popup.addTo(map)
        })
});

// create geocoder control and add it to the map
const geocoder = new MapboxGeocoder({
  accessToken: accessToken,
  mapboxgl: mapboxgl
});

map.addControl(geocoder);











</script>






</body>
</html>
